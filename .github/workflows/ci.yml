on: [push]

jobs:
  build:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v2

    - name: Run Linter ğŸ§
      shell: bash
      run: make lint

    - name: Configure git ğŸ”§
      run: |
        git config --global url."https://${{ secrets.KIVRABOT }}@github.com/kivra/".insteadOf "git@github.com:kivra/"
        git config --global url."https://${{ secrets.KIVRABOT }}@github.com/kivra".insteadOf "https://github.com/kivra"

    - name: Run Erlang Tests ğŸƒğŸ¾
      shell: bash
      run: make test-erl

    - name: Run Go Tests ğŸƒğŸ½â€â™€ï¸
      shell: bash
      run: make test-go
